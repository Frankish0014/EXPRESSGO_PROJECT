<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="booking-styles.css">
  <title>Book Your Trip - ExpressGo</title>
</head>
<body>
  <!-- Header -->
  <header class="navbar">
    <div class="container nav-content">
      <div class="logo"><a href="">ExpressGo</a></div>
      <nav>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="#about">About</a></li>
          <li><a href="#destinations">Destinations</a></li>
          <li><a href="#contact">Contact</a></li>
          <li><a href="user-log-in.html">Login</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Booking Section -->
  <section class="booking-section">
    <div class="container">
      <div class="page-header">
        <h1>Book Your Journey</h1>
        <p>Travel comfortably across Rwanda with ExpressGo</p>
      </div>

      <div class="booking-container">
        <!-- Booking Form -->
        <div class="booking-form-card">
          <h2 class="section-title">Trip Details</h2>
          
          <form id="bookingForm">
            <div class="form-group">
              <label for="from">From (Departure)</label>
              <select id="from" name="from" required>
                <option value="">Select departure point</option>
                <option value="Kigali - Nyabugogo">Kigali - Nyabugogo</option>
              </select>
            </div>

            <div class="form-group">
              <label for="to">To (Destination)</label>
              <select id="to" name="to" required>
                <option value="">Select destination</option>
                <optgroup label="Eastern Province">
                  <option value="Bugesera" data-price="750">Bugesera</option>
                  <option value="Gatsibo" data-price="4500">Gatsibo</option>
                  <option value="Kayonza" data-price="3000">Kayonza</option>
                  <option value="Kirehe" data-price="4000">Kirehe</option>
                  <option value="Ngoma" data-price="3500">Ngoma</option>
                  <option value="Nyagatare" data-price="5000">Nyagatare</option>
                  <option value="Rwamagana" data-price="2000">Rwamagana</option>
                </optgroup>
                <optgroup label="Northern Province">
                  <option value="Burera" data-price="3500">Burera</option>
                  <option value="Gakenke" data-price="3000">Gakenke</option>
                  <option value="Gicumbi" data-price="302">Gicumbi</option>
                  <option value="Rukomo" data-price="672">Rukomo</option>
                  <option value="Musanze" data-price="2200">Musanze</option>
                  <option value="Rulindo" data-price="2500">Rulindo</option>
                </optgroup>
                <optgroup label="Southern Province">
                  <option value="Gisagara" data-price="3500">Gisagara</option>
                  <option value="Huye" data-price="3000">Huye</option>
                  <option value="Kamonyi" data-price="1800">Kamonyi</option>
                  <option value="Muhanga" data-price="2000">Muhanga</option>
                  <option value="Nyamagabe" data-price="4000">Nyamagabe</option>
                  <option value="Nyanza" data-price="2800">Nyanza</option>
                  <option value="Nyaruguru" data-price="4500">Nyaruguru</option>
                  <option value="Ruhango" data-price="2200">Ruhango</option>
                </optgroup>
                <optgroup label="Western Province">
                  <option value="Karongi" data-price="5000">Karongi</option>
                  <option value="Ngororero" data-price="4000">Ngororero</option>
                  <option value="Nyabihu" data-price="3500">Nyabihu</option>
                  <option value="Nyamasheke" data-price="6000">Nyamasheke</option>
                  <option value="Rubavu" data-price="4200">Rubavu</option>
                  <option value="Rusizi" data-price="7500">Rusizi</option>
                  <option value="Rutsiro" data-price="4500">Rutsiro</option>
                </optgroup>
              </select>
            </div>

            <div id="routeInfo" class="route-info">
              <p><strong>Distance:</strong> <span id="distance">-</span></p>
              <p><strong>Duration:</strong> <span id="duration">-</span></p>
              <p><strong>Price per seat:</strong> <span id="pricePerSeat">-</span> Rwf</p>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="departDate">Departure Date</label>
                <input type="date" id="departDate" name="departDate" required />
              </div>

              <div class="form-group">
                <label for="departTime">Departure Time</label>
                <select id="departTime" name="departTime" required>
                  <option value="">Select time</option>
                  <option value="06:00">06:00 AM</option>
                  <option value="08:00">08:00 AM</option>
                  <option value="10:00">10:00 AM</option>
                  <option value="12:00">12:00 PM</option>
                  <option value="14:00">02:00 PM</option>
                  <option value="16:00">04:00 PM</option>
                  <option value="18:00">06:00 PM</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label for="passengers">Number of Passengers</label>
              <input type="number" id="passengers" name="passengers" min="1" max="10" value="1" required />
            </div>

            <h2 class="section-title" style="margin-top: 2rem;">Passenger Information</h2>

            <div class="form-group">
              <label for="fullName">Full Name</label>
              <input type="text" id="fullName" name="fullName" placeholder="Enter full name" required />
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" name="email" placeholder="your@email.com" required />
              </div>

              <div class="form-group">
                <label for="phone">Phone Number</label>
                <input type="tel" id="phone" name="phone" placeholder="+250 7XX XXX XXX" required />
              </div>
            </div>

            <div class="form-group">
              <label for="idNumber">ID/Passport Number</label>
              <input type="text" id="idNumber" name="idNumber" placeholder="Enter ID or Passport number" required />
            </div>

            <h2 class="section-title" style="margin-top: 2rem;">Select Your Seat(s)</h2>
            <div class="seat-selection" id="seatSelection">
              <!-- Seats will be generated by JavaScript -->
            </div>
            <div class="seat-legend">
              <div class="legend-item">
                <div class="legend-box available"></div>
                <span>Available</span>
              </div>
              <div class="legend-item">
                <div class="legend-box selected"></div>
                <span>Selected</span>
              </div>
              <div class="legend-item">
                <div class="legend-box occupied"></div>
                <span>Occupied</span>
              </div>
            </div>
          </form>
        </div>

        <!-- Booking Summary -->
        <div class="booking-summary">
          <h2 class="section-title">Booking Summary</h2>
          
          <div class="summary-item">
            <span class="summary-label">Route:</span>
            <span class="summary-value" id="summaryRoute">-</span>
          </div>

          <div class="summary-item">
            <span class="summary-label">Date:</span>
            <span class="summary-value" id="summaryDate">-</span>
          </div>

          <div class="summary-item">
            <span class="summary-label">Time:</span>
            <span class="summary-value" id="summaryTime">-</span>
          </div>

          <div class="summary-item">
            <span class="summary-label">Passengers:</span>
            <span class="summary-value" id="summaryPassengers">1</span>
          </div>

          <div class="summary-item">
            <span class="summary-label">Selected Seats:</span>
            <span class="summary-value" id="summarySeats">None</span>
          </div>

          <div class="summary-item">
            <span class="summary-label">Price per seat:</span>
            <span class="summary-value" id="summaryPricePerSeat">0 Rwf</span>
          </div>

          <div class="summary-item">
            <span class="summary-label">Total:</span>
            <span class="price" id="summaryTotal">0 Rwf</span>
          </div>

          <button type="button" class="btn-primary" id="confirmBooking" disabled>Confirm Booking</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer id="contact" class="footer">
    <div class="container footer-content">
      <div>
        <h3>ExpressGo</h3>
        <p>Reliable transport across Rwanda.</p>
      </div>
      <div>
        <h4>Contact</h4>
        <p>Email: info@expressgo.com</p>
        <p>Phone: +250 7813 489</p>
      </div>
      <div>
        <h4>Follow Us</h4>
        <p>üåê Facebook | Twitter | Instagram</p>
      </div>
    </div>
    <div class="footer-bottom">
      <p>¬© 2025 ExpressGo. All rights reserved.</p>
    </div>
  </footer>

  <script>
    // Route data with distances and durations
    const routeData = {
      'Bugesera': { distance: '50 km', duration: '1 hour' },
      'Gatsibo': { distance: '130 km', duration: '2.5 hours' },
      'Kayonza': { distance: '75 km', duration: '1.5 hours' },
      'Kirehe': { distance: '110 km', duration: '2 hours' },
      'Ngoma': { distance: '95 km', duration: '2 hours' },
      'Nyagatare': { distance: '170 km', duration: '3 hours' },
      'Rwamagana': { distance: '45 km', duration: '1 hour' },
      'Burera': { distance: '110 km', duration: '2.5 hours' },
      'Gakenke': { distance: '95 km', duration: '2 hours' },
      'Gicumbi': { distance: '100 km', duration: '2 hours' },
      'Musanze': { distance: '85 km', duration: '2 hours' },
      'Rulindo': { distance: '65 km', duration: '1.5 hours' },
      'Gisagara': { distance: '110 km', duration: '2.5 hours' },
      'Huye': { distance: '135 km', duration: '2.5 hours' },
      'Kamonyi': { distance: '40 km', duration: '1 hour' },
      'Muhanga': { distance: '50 km', duration: '1 hour' },
      'Nyamagabe': { distance: '160 km', duration: '3 hours' },
      'Nyanza': { distance: '85 km', duration: '2 hours' },
      'Nyaruguru': { distance: '180 km', duration: '3.5 hours' },
      'Ruhango': { distance: '60 km', duration: '1.5 hours' },
      'Karongi': { distance: '150 km', duration: '3 hours' },
      'Ngororero': { distance: '120 km', duration: '2.5 hours' },
      'Nyabihu': { distance: '110 km', duration: '2.5 hours' },
      'Nyamasheke': { distance: '210 km', duration: '4 hours' },
      'Rubavu': { distance: '155 km', duration: '3 hours' },
      'Rusizi': { distance: '240 km', duration: '5 hours' },
      'Rutsiro': { distance: '140 km', duration: '3 hours' }
    };

    // Generate seats
    const seatSelection = document.getElementById('seatSelection');
    const totalSeats = 40;
    const occupiedSeats = [5, 12, 18, 23, 29, 35]; // Example occupied seats
    let selectedSeats = [];

    for (let i = 1; i <= totalSeats; i++) {
      const seat = document.createElement('div');
      seat.className = 'seat';
      seat.textContent = i;
      seat.dataset.seat = i;

      if (occupiedSeats.includes(i)) {
        seat.classList.add('occupied');
      } else {
        seat.addEventListener('click', function() {
          const maxPassengers = parseInt(document.getElementById('passengers').value);
          
          if (this.classList.contains('selected')) {
            this.classList.remove('selected');
            selectedSeats = selectedSeats.filter(s => s !== i);
          } else if (selectedSeats.length < maxPassengers) {
            this.classList.add('selected');
            selectedSeats.push(i);
          } else {
            alert(`You can only select ${maxPassengers} seat(s)`);
          }
          
          updateSummary();
        });
      }

      seatSelection.appendChild(seat);
    }

    // Form elements
    const toSelect = document.getElementById('to');
    const routeInfo = document.getElementById('routeInfo');
    const departDate = document.getElementById('departDate');
    const departTime = document.getElementById('departTime');
    const passengersInput = document.getElementById('passengers');
    const confirmBtn = document.getElementById('confirmBooking');

    // Set minimum date to today
    const today = new Date().toISOString().split('T')[0];
    departDate.setAttribute('min', today);

    // Update route info when destination changes
    toSelect.addEventListener('change', function() {
      const destination = this.value;
      const price = this.options[this.selectedIndex].dataset.price;
      
      if (destination && routeData[destination]) {
        document.getElementById('distance').textContent = routeData[destination].distance;
        document.getElementById('duration').textContent = routeData[destination].duration;
        document.getElementById('pricePerSeat').textContent = price;
        routeInfo.classList.add('show');
      } else {
        routeInfo.classList.remove('show');
      }
      
      updateSummary();
    });

    // Update summary when passengers change
    passengersInput.addEventListener('change', function() {
      // Reset selected seats
      document.querySelectorAll('.seat.selected').forEach(seat => {
        seat.classList.remove('selected');
      });
      selectedSeats = [];
      updateSummary();
    });

    // Update summary
    function updateSummary() {
      const from = document.getElementById('from').value;
      const to = toSelect.value;
      const date = departDate.value;
      const time = departTime.value;
      const passengers = passengersInput.value;
      const price = toSelect.options[toSelect.selectedIndex].dataset.price || 0;

      document.getElementById('summaryRoute').textContent = 
        (from && to) ? `${from} ‚Üí ${to}` : '-';
      document.getElementById('summaryDate').textContent = date || '-';
      document.getElementById('summaryTime').textContent = time || '-';
      document.getElementById('summaryPassengers').textContent = passengers;
      document.getElementById('summarySeats').textContent = 
        selectedSeats.length > 0 ? selectedSeats.join(', ') : 'None';
      document.getElementById('summaryPricePerSeat').textContent = `${price} Rwf`;
      
      const total = price * selectedSeats.length;
      document.getElementById('summaryTotal').textContent = `${total.toLocaleString()} Rwf`;

      // Enable/disable confirm button
      confirmBtn.disabled = !(from && to && date && time && selectedSeats.length === parseInt(passengers));
    }

    departDate.addEventListener('change', updateSummary);
    departTime.addEventListener('change', updateSummary);

    // Confirm booking
    confirmBtn.addEventListener('click', function() {
      const bookingData = {
        from: document.getElementById('from').value,
        to: toSelect.value,
        date: departDate.value,
        time: departTime.value,
        passengers: passengersInput.value,
        seats: selectedSeats,
        fullName: document.getElementById('fullName').value,
        email: document.getElementById('email').value,
        phone: document.getElementById('phone').value,
        idNumber: document.getElementById('idNumber').value,
        total: document.getElementById('summaryTotal').textContent
      };

      if (!bookingData.fullName || !bookingData.email || !bookingData.phone || !bookingData.idNumber) {
        alert('Please fill in all passenger information');
        return;
      }

      alert(`Booking Confirmed!\n\nRoute: ${bookingData.from} ‚Üí ${bookingData.to}\nDate: ${bookingData.date} at ${bookingData.time}\nSeats: ${bookingData.seats.join(', ')}\nTotal: ${bookingData.total}\n\nA confirmation email will be sent to ${bookingData.email}`);
      
      // Here you would send the booking data to your server
      // Example: fetch('/api/bookings', { method: 'POST', body: JSON.stringify(bookingData) })
    });
  </script>
</body>
</html>