<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Booking Management</title>
  <style>
/* styles.css */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  background: #f8f9fa;
  color: #1a1a1a;
  line-height: 1.6;
}

.container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 24px;
}

/* Header */
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 32px;
}

.header-left h1 {
  font-size: 28px;
  font-weight: 600;
}

.header-right {
  display: flex;
  align-items: center;
  gap: 16px;
}

.user-avatars {
  display: flex;
  align-items: center;
}

.avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  border: 2px solid white;
  margin-left: -8px;
}

.avatar:first-child {
  margin-left: 0;
}

.profile-avatar {
  width: 36px;
  height: 36px;
  cursor: pointer;
}

.avatar-more {
  font-size: 12px;
  color: #666;
  margin-left: 4px;
}

.icon-btn {
  position: relative;
  background: white;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  padding: 8px 12px;
  cursor: pointer;
  font-size: 18px;
  transition: all 0.2s;
}

.icon-btn:hover {
  background: #f5f5f5;
}

.notification-badge {
  position: absolute;
  top: -4px;
  right: -4px;
  background: #ff4444;
  color: white;
  font-size: 10px;
  padding: 2px 6px;
  border-radius: 10px;
  font-weight: 600;
}

.search-box {
  display: flex;
  align-items: center;
  gap: 8px;
  background: white;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  padding: 8px 12px;
  min-width: 280px;
}

.search-box input {
  border: none;
  outline: none;
  flex: 1;
  font-size: 14px;
}

.search-shortcut {
  font-size: 12px;
  color: #999;
  border: 1px solid #e0e0e0;
  padding: 2px 6px;
  border-radius: 4px;
}

/* Stats Cards */
.stats-container {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 20px;
  margin-bottom: 24px;
}

.stat-card {
  background: white;
  border-radius: 12px;
  padding: 20px;
  border: 1px solid #e8e8e8;
}

.stat-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 12px;
}

.stat-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
}

.stat-dot.purple { background: #8b5cf6; }
.stat-dot.orange { background: #f97316; }
.stat-dot.green { background: #10b981; }
.stat-dot.red { background: #ef4444; }

.stat-label {
  font-size: 13px;
  color: #666;
}

.stat-value {
  font-size: 32px;
  font-weight: 600;
  color: #1a1a1a;
}

/* Filters Bar */
.filters-bar {
  background: white;
  border-radius: 12px;
  padding: 16px 20px;
  margin-bottom: 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border: 1px solid #e8e8e8;
}

.filter-tabs {
  display: flex;
  gap: 8px;
}

.filter-tab {
  background: transparent;
  border: none;
  padding: 8px 16px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 14px;
  color: #666;
  font-weight: 500;
  transition: all 0.2s;
}

.filter-tab:hover {
  background: #f5f5f5;
  color: #1a1a1a;
}

.filter-tab.active {
  background: #1a1a1a;
  color: white;
}

.filter-actions {
  display: flex;
  gap: 12px;
}

.btn-primary, .btn-secondary {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 16px;
  border-radius: 8px;
  border: none;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.btn-primary {
  background: #1a1a1a;
  color: white;
}

.btn-primary:hover {
  background: #333;
}

.btn-secondary {
  background: white;
  color: #1a1a1a;
  border: 1px solid #e0e0e0;
}

.btn-secondary:hover {
  background: #f5f5f5;
}

/* Table */
.table-container {
  background: white;
  border-radius: 12px;
  overflow: hidden;
  border: 1px solid #e8e8e8;
  margin-bottom: 20px;
}

.bookings-table {
  width: 100%;
  border-collapse: collapse;
}

.bookings-table thead {
  background: #fafafa;
  border-bottom: 1px solid #e8e8e8;
}

.bookings-table th {
  text-align: left;
  padding: 14px 16px;
  font-size: 13px;
  font-weight: 600;
  color: #666;
  cursor: pointer;
  user-select: none;
}

.sort-icon {
  margin-left: 4px;
  color: #ccc;
  font-size: 12px;
}

.bookings-table tbody tr {
  border-bottom: 1px solid #f0f0f0;
  transition: background 0.15s;
}

.bookings-table tbody tr:hover {
  background: #fafafa;
}

.bookings-table tbody tr.selected {
  background: #f0f7ff;
}

.bookings-table td {
  padding: 16px;
  font-size: 14px;
  color: #1a1a1a;
}

.bookings-table input[type="checkbox"] {
  width: 18px;
  height: 18px;
  cursor: pointer;
  accent-color: #1a1a1a;
}

.passenger-info {
  display: flex;
  align-items: center;
  gap: 10px;
}

.passenger-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
}

.passenger-name {
  font-weight: 500;
}

.booking-number {
  color: #666;
  font-family: 'Courier New', monospace;
}

.status-badge {
  display: inline-block;
  padding: 4px 12px;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 500;
}

.status-badge.pending {
  background: #fff7e6;
  color: #d97706;
}

.status-badge.confirmed {
  background: #dcfce7;
  color: #15803d;
}

.status-badge.checked-in {
  background: #dbeafe;
  color: #1e40af;
}

.status-badge.canceled {
  background: #fee2e2;
  color: #b91c1c;
}

.payment-badge {
  display: inline-block;
  padding: 4px 12px;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 500;
}

.payment-badge.paid {
  background: #dcfce7;
  color: #15803d;
}

.payment-badge.unpaid {
  background: #fee2e2;
  color: #b91c1c;
}

.action-buttons {
  display: flex;
  gap: 8px;
}

.action-btn {
  background: transparent;
  border: none;
  cursor: pointer;
  font-size: 18px;
  padding: 6px;
  border-radius: 6px;
  transition: background 0.2s;
}

.action-btn:hover {
  background: #f0f0f0;
}

.action-btn.edit { 
  color: #2563eb; 
}

.action-btn.view { 
  color: #059669; 
}

.action-btn.delete { 
  color: #dc2626; 
}

.action-btn.more { 
  color: #666; 
}

/* Bulk Actions Bar */
.bulk-actions-bar {
  position: fixed;
  bottom: 24px;
  left: 50%;
  transform: translateX(-50%);
  background: #1a1a1a;
  color: white;
  padding: 16px 24px;
  border-radius: 12px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
  display: flex;
  align-items: center;
  gap: 16px;
  z-index: 100;
}

.bulk-actions-left {
  display: flex;
  align-items: center;
  gap: 16px;
}

#selectedCount {
  font-weight: 600;
}

.bulk-action-btn {
  background: rgba(255, 255, 255, 0.1);
  border: none;
  color: white;
  padding: 8px 16px;
  border-radius: 8px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 14px;
  transition: background 0.2s;
}

.bulk-action-btn:hover {
  background: rgba(255, 255, 255, 0.2);
}

.bulk-action-btn.delete {
  background: #dc2626;
}

.bulk-action-btn.delete:hover {
  background: #b91c1c;
}

/* Pagination */
.pagination {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 24px;
}

.pagination-info {
  font-size: 14px;
  color: #666;
}

.pagination-controls {
  display: flex;
  gap: 8px;
}

.page-btn {
  background: white;
  border: 1px solid #e0e0e0;
  padding: 8px 12px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
  color: #666;
  transition: all 0.2s;
  min-width: 40px;
}

.page-btn:hover {
  background: #f5f5f5;
  color: #1a1a1a;
}

.page-btn.active {
  background: #3b82f6;
  color: white;
  border-color: #3b82f6;
}

.page-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.page-dots {
  padding: 8px 4px;
  color: #ccc;
}

/* Modal */
.modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  z-index: 1000;
  align-items: center;
  justify-content: center;
}

.modal.show {
  display: flex;
}

.modal-content {
  background: white;
  border-radius: 16px;
  width: 90%;
  max-width: 500px;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
}

.modal-content.large {
  max-width: 800px;
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 24px;
  border-bottom: 1px solid #e8e8e8;
}

.modal-header h2 {
  font-size: 20px;
  font-weight: 600;
}

.close-btn {
  background: transparent;
  border: none;
  font-size: 24px;
  cursor: pointer;
  color: #666;
  padding: 0;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  transition: background 0.2s;
}

.close-btn:hover {
  background: #f0f0f0;
}

.modal-body {
  padding: 24px;
}

/* Form Styles */
.form-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 24px;
  margin-bottom: 24px;
}

.form-section {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.form-section-title {
  font-size: 16px;
  font-weight: 600;
  color: #1a1a1a;
  margin-bottom: 8px;
  padding-bottom: 8px;
  border-bottom: 2px solid #e8e8e8;
}

.form-group {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.form-group label {
  font-size: 14px;
  font-weight: 500;
  color: #333;
}

.required {
  color: #ef4444;
}

.form-group input,
.form-group select {
  padding: 10px 12px;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  font-size: 14px;
  transition: all 0.2s;
  background: white;
}

.form-group input:focus,
.form-group select:focus {
  outline: none;
  border-color: #3b82f6;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.form-group input::placeholder {
  color: #999;
}

.form-hint {
  font-size: 12px;
  color: #666;
  font-style: italic;
}

.total-display {
  background: #f8f9fa;
  padding: 16px;
  border-radius: 8px;
  border: 1px solid #e8e8e8;
}

.total-amount-display {
  font-size: 24px;
  font-weight: 600;
  color: #10b981;
  margin-top: 4px;
}

.form-actions {
  display: flex;
  justify-content: flex-end;
  gap: 12px;
  padding-top: 16px;
  border-top: 1px solid #e8e8e8;
}

/* Notifications */
.notification {
  position: fixed;
  top: 24px;
  right: 24px;
  background: white;
  padding: 16px 20px;
  border-radius: 12px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
  display: none;
  align-items: center;
  gap: 12px;
  min-width: 320px;
  z-index: 2000;
  border-left: 4px solid;
}

.notification.show {
  display: flex;
  animation: slideIn 0.3s ease;
}

.notification.success {
  border-left-color: #10b981;
}

.notification.error {
  border-left-color: #ef4444;
}

.notification button {
  background: transparent;
  border: none;
  cursor: pointer;
  font-size: 18px;
  color: #666;
  margin-left: auto;
}

@keyframes slideIn {
  from {
    transform: translateX(400px);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

/* Loading Overlay */
.loading-overlay {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(255, 255, 255, 0.9);
  z-index: 9999;
  align-items: center;
  justify-content: center;
}

.loading-overlay.show {
  display: flex;
}

.spinner {
  width: 50px;
  height: 50px;
  border: 4px solid #f0f0f0;
  border-top: 4px solid #1a1a1a;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* Responsive */
@media (max-width: 1200px) {
  .stats-container {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 768px) {
  .header {
    flex-direction: column;
    gap: 16px;
  }

  .stats-container {
    grid-template-columns: 1fr;
  }

  .filters-bar {
    flex-direction: column;
    gap: 16px;
  }

  .table-container {
    overflow-x: auto;
  }

  .pagination {
    flex-direction: column;
    gap: 16px;
  }

  .form-grid {
    grid-template-columns: 1fr;
  }
}
  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="header-left">
        <h1>Bookings</h1>
      </div>
      <div class="header-right">
        <div class="user-avatars">
          <img src="https://i.pravatar.cc/40?img=1" alt="User" class="avatar">
          <img src="https://i.pravatar.cc/40?img=2" alt="User" class="avatar">
          <span class="avatar-more">2 +</span>
        </div>
        <button class="icon-btn" title="Notifications">
          <span class="notification-badge">5</span>
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
            <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
          </svg>
        </button>
        <div class="search-box">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
          <input type="text" placeholder="Search anything" id="searchInput">
          <span class="search-shortcut">⌘K</span>
        </div>
        <img src="https://i.pravatar.cc/40?img=5" alt="Profile" class="avatar profile-avatar">
      </div>
    </header>

    <!-- Stats Cards -->
    <div class="stats-container">
      <div class="stat-card">
        <div class="stat-header">
          <span class="stat-dot purple"></span>
          <span class="stat-label">Total Bookings This Month</span>
        </div>
        <div class="stat-value" id="totalCount">200</div>
      </div>
      <div class="stat-card">
        <div class="stat-header">
          <span class="stat-dot orange"></span>
          <span class="stat-label">Pending Bookings</span>
        </div>
        <div class="stat-value" id="pendingCount">20</div>
      </div>
      <div class="stat-card">
        <div class="stat-header">
          <span class="stat-dot green"></span>
          <span class="stat-label">Confirmed Bookings</span>
        </div>
        <div class="stat-value" id="confirmedCount">180</div>
      </div>
      <div class="stat-card">
        <div class="stat-header">
          <span class="stat-dot red"></span>
          <span class="stat-label">Canceled Bookings</span>
        </div>
        <div class="stat-value" id="canceledCount">10</div>
      </div>
    </div>

    <!-- Filters -->
    <div class="filters-bar">
      <div class="filter-tabs">
        <button class="filter-tab active" data-filter="all">All</button>
        <button class="filter-tab" data-filter="pending">Pending</button>
        <button class="filter-tab" data-filter="confirmed">Confirmed</button>
        <button class="filter-tab" data-filter="checked-in">Checked In</button>
        <button class="filter-tab" data-filter="canceled">Canceled</button>
      </div>
      <div class="filter-actions">
        <button class="btn-secondary" id="bulkUpdateBtn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12 6 12 12 16 14"></polyline>
          </svg>
          <span>Bulk Update Status</span>
        </button>
        <button class="btn-secondary" id="exportBtn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="7 10 12 15 17 10"></polyline>
            <line x1="12" y1="15" x2="12" y2="3"></line>
          </svg>
          <span>Export Bookings</span>
        </button>
        <button class="btn-primary" id="addBookingBtn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="12" y1="5" x2="12" y2="19"></line>
            <line x1="5" y1="12" x2="19" y2="12"></line>
          </svg>
          <span>Add Booking</span>
        </button>
      </div>
    </div>

    <!-- Table -->
    <div class="table-container">
      <table class="bookings-table">
        <thead>
          <tr>
            <th width="50">
              <input type="checkbox" id="selectAll">
            </th>
            <th>Booking Number <span class="sort-icon">↕</span></th>
            <th>Passenger Name <span class="sort-icon">↕</span></th>
            <th>Booking Date <span class="sort-icon">↕</span></th>
            <th>Status <span class="sort-icon">↕</span></th>
            <th>Total Amount <span class="sort-icon">↕</span></th>
            <th>Payment Status <span class="sort-icon">↕</span></th>
            <th width="100">Action</th>
          </tr>
        </thead>
        <tbody id="bookingsTableBody">
          <!-- Data will be inserted here by JavaScript -->
        </tbody>
      </table>
    </div>

    <!-- Bulk Actions Bar -->
    <div class="bulk-actions-bar" id="bulkActionsBar" style="display: none;">
      <div class="bulk-actions-left">
        <span id="selectedCount">2 Selected</span>
        <button class="bulk-action-btn" data-action="duplicate">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
          </svg>
          <span>Duplicate</span>
        </button>
        <button class="bulk-action-btn" data-action="print">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="6 9 6 2 18 2 18 9"></polyline>
            <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path>
            <rect x="6" y="14" width="12" height="8"></rect>
          </svg>
          <span>Print</span>
        </button>
        <button class="bulk-action-btn delete" data-action="delete">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="3 6 5 6 21 6"></polyline>
            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
            <line x1="10" y1="11" x2="10" y2="17"></line>
            <line x1="14" y1="11" x2="14" y2="17"></line>
          </svg>
          <span>Delete</span>
        </button>
        <button class="bulk-action-btn" id="closeBulkBar">✕</button>
      </div>
    </div>

    <!-- Pagination -->
    <div class="pagination">
      <div class="pagination-info">
        Showing <span id="pageInfo">1-9 of 240</span> entries
      </div>
      <div class="pagination-controls">
        <button class="page-btn" id="prevPage">Previous</button>
        <button class="page-btn active">1</button>
        <button class="page-btn">2</button>
        <button class="page-btn">3</button>
        <span class="page-dots">...</span>
        <button class="page-btn">12</button>
        <button class="page-btn" id="nextPage">Next</button>
      </div>
    </div>
  </div>

  <!-- Status Update Modal -->
  <div class="modal" id="statusModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Update Booking Status</h2>
        <button class="close-btn" id="closeStatusModal">✕</button>
      </div>
      <div class="modal-body" id="statusModalBody">
        <!-- Content will be inserted by JavaScript -->
      </div>
    </div>
  </div>

  <!-- Details Modal -->
  <div class="modal" id="detailsModal">
    <div class="modal-content large">
      <div class="modal-header">
        <h2>Booking Details</h2>
        <button class="close-btn" id="closeDetailsModal">✕</button>
      </div>
      <div class="modal-body" id="detailsModalBody">
        <!-- Content will be inserted by JavaScript -->
      </div>
    </div>
  </div>

  <!-- Add Booking Modal -->
  <div class="modal" id="addBookingModal">
    <div class="modal-content large">
      <div class="modal-header">
        <h2>Add New Booking</h2>
        <button class="close-btn" id="closeAddBookingModal">✕</button>
      </div>
      <div class="modal-body">
        <form id="addBookingForm">
          <div class="form-grid">
            <!-- Passenger Information -->
            <div class="form-section">
              <h3 class="form-section-title">Passenger Information</h3>
              
              <div class="form-group">
                <label for="passengerName">Full Name <span class="required">*</span></label>
                <input type="text" id="passengerName" name="passengerName" required placeholder="Enter passenger name">
              </div>

              <div class="form-group">
                <label for="passengerEmail">Email Address <span class="required">*</span></label>
                <input type="email" id="passengerEmail" name="passengerEmail" required placeholder="passenger@email.com">
              </div>

              <div class="form-group">
                <label for="passengerPhone">Phone Number <span class="required">*</span></label>
                <input type="tel" id="passengerPhone" name="passengerPhone" required placeholder="+250788123456">
              </div>
            </div>

            <!-- Travel Information -->
            <div class="form-section">
              <h3 class="form-section-title">Travel Information</h3>
              
              <div class="form-group">
                <label for="route">Route <span class="required">*</span></label>
                <select id="route" name="route" required>
                  <option value="">Select route</option>
                  <option value="Kigali - Butare">Kigali - Butare</option>
                  <option value="Kigali - Huye">Kigali - Huye</option>
                  <option value="Kigali - Nyagatare">Kigali - Nyagatare</option>
                  <option value="Kigali - Rubavu">Kigali - Rubavu</option>
                  <option value="Kigali - Rusizi">Kigali - Rusizi</option>
                  <option value="Butare - Nyanza">Butare - Nyanza</option>
                  <option value="Huye - Nyamagabe">Huye - Nyamagabe</option>
                </select>
              </div>

              <div class="form-group">
                <label for="travelDate">Travel Date <span class="required">*</span></label>
                <input type="date" id="travelDate" name="travelDate" required>
              </div>

              <div class="form-group">
                <label for="departureTime">Departure Time <span class="required">*</span></label>
                <select id="departureTime" name="departureTime" required>
                  <option value="">Select time</option>
                  <option value="06:00">06:00 AM</option>
                  <option value="08:00">08:00 AM</option>
                  <option value="10:00">10:00 AM</option>
                  <option value="12:00">12:00 PM</option>
                  <option value="14:00">02:00 PM</option>
                  <option value="16:00">04:00 PM</option>
                  <option value="18:00">06:00 PM</option>
                </select>
              </div>
            </div>

            <!-- Booking Information -->
            <div class="form-section">
              <h3 class="form-section-title">Booking Information</h3>
              
              <div class="form-group">
                <label for="numberOfSeats">Number of Seats <span class="required">*</span></label>
                <input type="number" id="numberOfSeats" name="numberOfSeats" required min="1" max="10" value="1">
              </div>

              <div class="form-group">
                <label for="seatNumbers">Seat Numbers (comma-separated)</label>
                <input type="text" id="seatNumbers" name="seatNumbers" placeholder="e.g., 12, 13, 14">
                <small class="form-hint">Leave blank to auto-assign seats</small>
              </div>

              <div class="form-group">
                <label for="bookingStatus">Booking Status <span class="required">*</span></label>
                <select id="bookingStatus" name="bookingStatus" required>
                  <option value="pending">Pending</option>
                  <option value="confirmed" selected>Confirmed</option>
                  <option value="checked-in">Checked In</option>
                </select>
              </div>
            </div>

            <!-- Payment Information -->
            <div class="form-section">
              <h3 class="form-section-title">Payment Information</h3>
              
              <div class="form-group">
                <label for="pricePerSeat">Price per Seat (RWF) <span class="required">*</span></label>
                <input type="number" id="pricePerSeat" name="pricePerSeat" required min="0" step="100" value="5000">
              </div>

              <div class="form-group">
                <label for="paymentMethod">Payment Method <span class="required">*</span></label>
                <select id="paymentMethod" name="paymentMethod" required>
                  <option value="">Select payment method</option>
                  <option value="cash">Cash</option>
                  <option value="mobile_money">Mobile Money</option>
                  <option value="bank_card">Bank Card</option>
                </select>
              </div>

              <div class="form-group">
                <label for="paymentStatus">Payment Status <span class="required">*</span></label>
                <select id="paymentStatus" name="paymentStatus" required>
                  <option value="unpaid">Unpaid</option>
                  <option value="paid" selected>Paid</option>
                </select>
              </div>

              <div class="form-group total-display">
                <label>Total Amount</label>
                <div class="total-amount-display" id="totalAmountDisplay">0 RWF</div>
              </div>
            </div>
          </div>

          <div class="form-actions">
            <button type="button" class="btn-secondary" onclick="bookingManager.closeModal('addBookingModal')">Cancel</button>
            <button type="submit" class="btn-primary">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="20 6 9 17 4 12"></polyline>
              </svg>
              <span>Create Booking</span>
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Notifications -->
  <div class="notification success" id="successNotification">
    <span id="successMessage"></span>
    <button onclick="closeNotification('successNotification')">✕</button>
  </div>
  <div class="notification error" id="errorNotification">
    <span id="errorMessage"></span>
    <button onclick="closeNotification('errorNotification')">✕</button>
  </div>

  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loadingOverlay">
    <div class="spinner"></div>
  </div>

  <script>
// script.js
class BookingManager {
  constructor() {
    this.bookings = [];
    this.filteredBookings = [];
    this.currentPage = 1;
    this.itemsPerPage = 9;
    this.currentFilter = 'all';
    this.selectedBookings = new Set();
    this.currentBooking = null;
  }

  init() {
    this.bindEvents();
    this.loadInitialData();
  }

  bindEvents() {
    // Filter tabs
    document.querySelectorAll('.filter-tab').forEach(tab => {
      tab.addEventListener('click', (e) => {
        document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
        e.target.classList.add('active');
        this.currentFilter = e.target.dataset.filter;
        this.applyFilters();
      });
    });

    // Search
    const searchInput = document.getElementById('searchInput');
    if (searchInput) {
      searchInput.addEventListener('input', () => this.applyFilters());
    }

    // Select all
    const selectAll = document.getElementById('selectAll');
    if (selectAll) {
      selectAll.addEventListener('change', (e) => this.toggleSelectAll(e.target.checked));
    }

    // Bulk actions
    const closeBulkBar = document.getElementById('closeBulkBar');
    if (closeBulkBar) {
      closeBulkBar.addEventListener('click', () => this.closeBulkActions());
    }

    document.querySelectorAll('.bulk-action-btn').forEach(btn => {
      btn.addEventListener('click', (e) => {
        const action = e.currentTarget.dataset.action;
        if (action) this.handleBulkAction(action);
      });
    });

    // Export button
    const exportBtn = document.getElementById('exportBtn');
    if (exportBtn) {
      exportBtn.addEventListener('click', () => this.exportBookings());
    }

    // Modal close
    const closeStatusModal = document.getElementById('closeStatusModal');
    const closeDetailsModal = document.getElementById('closeDetailsModal');
    const closeAddBookingModal = document.getElementById('closeAddBookingModal');
    if (closeStatusModal) closeStatusModal.addEventListener('click', () => this.closeModal('statusModal'));
    if (closeDetailsModal) closeDetailsModal.addEventListener('click', () => this.closeModal('detailsModal'));
    if (closeAddBookingModal) closeAddBookingModal.addEventListener('click', () => this.closeModal('addBookingModal'));

    // Add booking button
    const addBookingBtn = document.getElementById('addBookingBtn');
    if (addBookingBtn) {
      addBookingBtn.addEventListener('click', () => this.showAddBookingModal());
    }

    // Add booking form
    const addBookingForm = document.getElementById('addBookingForm');
    if (addBookingForm) {
      addBookingForm.addEventListener('submit', (e) => this.handleAddBooking(e));
    }

    // Calculate total amount dynamically
    const numberOfSeats = document.getElementById('numberOfSeats');
    const pricePerSeat = document.getElementById('pricePerSeat');
    if (numberOfSeats && pricePerSeat) {
      numberOfSeats.addEventListener('input', () => this.updateTotalAmount());
      pricePerSeat.addEventListener('input', () => this.updateTotalAmount());
    }

    // Pagination
    const prevPage = document.getElementById('prevPage');
    const nextPage = document.getElementById('nextPage');
    if (prevPage) prevPage.addEventListener('click', () => this.previousPage());
    if (nextPage) nextPage.addEventListener('click', () => this.nextPage());
  }

  async loadInitialData() {
    this.showLoading();
    try {
      this.bookings = this.generateMockBookings();
      this.updateStats();
      this.applyFilters();
      this.showSuccess('Booking data loaded successfully');
    } catch (error) {
      console.error('Error loading data:', error);
      this.showError('Failed to load booking data');
    } finally {
      this.hideLoading();
    }
  }

  generateMockBookings() {
    const bookings = [];
    const statuses = ['pending', 'confirmed', 'checked-in', 'canceled'];
    const passengers = [
      { name: 'Esther Kelvin', email: 'esther.k@email.com', phone: '+250788123456', avatar: 'https://i.pravatar.cc/40?img=10' },
      { name: 'Denise Kuhn', email: 'denise.k@email.com', phone: '+250788234567', avatar: 'https://i.pravatar.cc/40?img=20' },
      { name: 'Clint Hoppe', email: 'clint.h@email.com', phone: '+250788345678', avatar: 'https://i.pravatar.cc/40?img=30' },
      { name: 'Darin Deckow', email: 'darin.d@email.com', phone: '+250788456789', avatar: 'https://i.pravatar.cc/40?img=40' },
      { name: 'Jacquelyn Robel', email: 'jacq.r@email.com', phone: '+250788567890', avatar: 'https://i.pravatar.cc/40?img=50' },
      { name: 'Stewart Kulas', email: 'stewart.k@email.com', phone: '+250788678901', avatar: 'https://i.pravatar.cc/40?img=60' },
      { name: 'Gretchen Quitz', email: 'gretch.q@email.com', phone: '+250788789012', avatar: 'https://i.pravatar.cc/40?img=70' },
      { name: 'Erin Bliss', email: 'erin.b@email.com', phone: '+250788890123', avatar: 'https://i.pravatar.cc/40?img=80' }
    ];

    const routes = ['Kigali - Butare', 'Kigali - Huye', 'Kigali - Nyagatare', 'Kigali - Rubavu'];
    const paymentStatuses = ['paid', 'unpaid'];

    for (let i = 1; i <= 240; i++) {
      const passenger = passengers[Math.floor(Math.random() * passengers.length)];
      const status = statuses[Math.floor(Math.random() * statuses.length)];
      const paymentStatus = paymentStatuses[Math.floor(Math.random() * paymentStatuses.length)];
      const route = routes[Math.floor(Math.random() * routes.length)];
      
      const bookingDate = new Date();
      bookingDate.setDate(bookingDate.getDate() - Math.floor(Math.random() * 10));
      
      const amount = (Math.floor(Math.random() * 500) + 50) * 100;

      bookings.push({
        id: i,
        orderNumber: `#ORD${String(1000 + i).slice(1)}`,
        passenger: passenger,
        bookingDate: bookingDate,
        status: status,
        amount: amount,
        paymentStatus: paymentStatus,
        route: route
      });
    }

    return bookings;
  }

  updateStats() {
    const stats = {
      total: this.bookings.length,
      pending: this.bookings.filter(b => b.status === 'pending').length,
      confirmed: this.bookings.filter(b => b.status === 'confirmed').length,
      canceled: this.bookings.filter(b => b.status === 'canceled').length
    };

    document.getElementById('totalCount').textContent = stats.total;
    document.getElementById('pendingCount').textContent = stats.pending;
    document.getElementById('confirmedCount').textContent = stats.confirmed;
    document.getElementById('canceledCount').textContent = stats.canceled;
  }

  applyFilters() {
    const searchTerm = document.getElementById('searchInput').value.toLowerCase();

    this.filteredBookings = this.bookings.filter(booking => {
      const matchesFilter = this.currentFilter === 'all' || booking.status === this.currentFilter;
      const matchesSearch = !searchTerm || 
        booking.orderNumber.toLowerCase().includes(searchTerm) ||
        booking.passenger.name.toLowerCase().includes(searchTerm) ||
        booking.passenger.email.toLowerCase().includes(searchTerm);
      
      return matchesFilter && matchesSearch;
    });

    this.currentPage = 1;
    this.renderBookings();
    this.updatePagination();
  }

  renderBookings() {
    const tbody = document.getElementById('bookingsTableBody');
    if (!tbody) return;

    const startIndex = (this.currentPage - 1) * this.itemsPerPage;
    const endIndex = startIndex + this.itemsPerPage;
    const pageBookings = this.filteredBookings.slice(startIndex, endIndex);

    tbody.innerHTML = pageBookings.map(booking => `
      <tr class="${this.selectedBookings.has(booking.id) ? 'selected' : ''}">
        <td>
          <input type="checkbox" 
                 class="booking-checkbox" 
                 value="${booking.id}"
                 ${this.selectedBookings.has(booking.id) ? 'checked' : ''}>
        </td>
        <td><span class="booking-number">${booking.orderNumber}</span></td>
        <td>
          <div class="passenger-info">
            <img src="${booking.passenger.avatar}" alt="${booking.passenger.name}" class="passenger-avatar">
            <div>
              <div class="passenger-name">${booking.passenger.name}</div>
            </div>
          </div>
        </td>
        <td>${booking.bookingDate.toLocaleDateString('en-US', { day: 'numeric', month: 'short', year: 'numeric' })}</td>
        <td><span class="status-badge ${booking.status}">${this.formatStatus(booking.status)}</span></td>
        <td>${(booking.amount / 100).toFixed(2)}</td>
        <td><span class="payment-badge ${booking.paymentStatus}">${this.formatPaymentStatus(booking.paymentStatus)}</span></td>
        <td>
          <div class="action-buttons">
            <button class="action-btn edit" onclick="bookingManager.editBooking(${booking.id})" title="Edit">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
              </svg>
            </button>
            <button class="action-btn view" onclick="bookingManager.viewDetails(${booking.id})" title="View">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                <circle cx="12" cy="12" r="3"></circle>
              </svg>
            </button>
            <button class="action-btn delete" onclick="bookingManager.deleteBooking(${booking.id})" title="Delete">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                <line x1="10" y1="11" x2="10" y2="17"></line>
                <line x1="14" y1="11" x2="14" y2="17"></line>
              </svg>
            </button>
          </div>
        </td>
      </tr>
    `).join('');

    // Bind checkbox events
    document.querySelectorAll('.booking-checkbox').forEach(checkbox => {
      checkbox.addEventListener('change', (e) => this.handleCheckboxChange(e));
    });
  }

  formatStatus(status) {
    return status.charAt(0).toUpperCase() + status.slice(1).replace('-', ' ');
  }

  formatPaymentStatus(status) {
    return status.charAt(0).toUpperCase() + status.slice(1);
  }

  handleCheckboxChange(e) {
    const bookingId = parseInt(e.target.value);
    const row = e.target.closest('tr');
    
    if (e.target.checked) {
      this.selectedBookings.add(bookingId);
      row.classList.add('selected');
    } else {
      this.selectedBookings.delete(bookingId);
      row.classList.remove('selected');
    }

    this.updateBulkActionsBar();
    this.updateSelectAllState();
  }

  toggleSelectAll(checked) {
    const startIndex = (this.currentPage - 1) * this.itemsPerPage;
    const endIndex = startIndex + this.itemsPerPage;
    const pageBookings = this.filteredBookings.slice(startIndex, endIndex);

    pageBookings.forEach(booking => {
      if (checked) {
        this.selectedBookings.add(booking.id);
      } else {
        this.selectedBookings.delete(booking.id);
      }
    });

    this.renderBookings();
    this.updateBulkActionsBar();
  }

  updateSelectAllState() {
    const selectAll = document.getElementById('selectAll');
    const startIndex = (this.currentPage - 1) * this.itemsPerPage;
    const endIndex = startIndex + this.itemsPerPage;
    const pageBookings = this.filteredBookings.slice(startIndex, endIndex);
    
    const allSelected = pageBookings.every(b => this.selectedBookings.has(b.id));
    const someSelected = pageBookings.some(b => this.selectedBookings.has(b.id));
    
    if (selectAll) {
      selectAll.checked = allSelected && pageBookings.length > 0;
      selectAll.indeterminate = someSelected && !allSelected;
    }
  }

  updateBulkActionsBar() {
    const bulkBar = document.getElementById('bulkActionsBar');
    const selectedCount = document.getElementById('selectedCount');
    
    if (this.selectedBookings.size > 0) {
      bulkBar.style.display = 'flex';
      selectedCount.textContent = `${this.selectedBookings.size} Selected`;
    } else {
      bulkBar.style.display = 'none';
    }
  }

  closeBulkActions() {
    this.selectedBookings.clear();
    document.getElementById('selectAll').checked = false;
    this.renderBookings();
    this.updateBulkActionsBar();
  }

  handleBulkAction(action) {
    if (this.selectedBookings.size === 0) {
      this.showError('No bookings selected');
      return;
    }

    switch(action) {
      case 'duplicate':
        this.showSuccess(`Duplicated ${this.selectedBookings.size} booking(s)`);
        break;
      case 'print':
        this.showSuccess(`Printing ${this.selectedBookings.size} booking(s)`);
        break;
      case 'delete':
        if (confirm(`Delete ${this.selectedBookings.size} booking(s)?`)) {
          this.showSuccess(`Deleted ${this.selectedBookings.size} booking(s)`);
          this.closeBulkActions();
        }
        break;
    }
  }

  updatePagination() {
    const totalPages = Math.ceil(this.filteredBookings.length / this.itemsPerPage);
    const startItem = (this.currentPage - 1) * this.itemsPerPage + 1;
    const endItem = Math.min(this.currentPage * this.itemsPerPage, this.filteredBookings.length);

    document.getElementById('pageInfo').textContent = `${startItem}-${endItem} of ${this.filteredBookings.length}`;
    
    const prevBtn = document.getElementById('prevPage');
    const nextBtn = document.getElementById('nextPage');
    
    if (prevBtn) prevBtn.disabled = this.currentPage === 1;
    if (nextBtn) nextBtn.disabled = this.currentPage === totalPages;

    // Update page numbers dynamically
    this.renderPageNumbers(totalPages);
  }

  renderPageNumbers(totalPages) {
    const paginationControls = document.querySelector('.pagination-controls');
    if (!paginationControls) return;

    // Clear existing page numbers (keep prev/next buttons)
    const prevBtn = document.getElementById('prevPage');
    const nextBtn = document.getElementById('nextPage');
    paginationControls.innerHTML = '';
    
    // Re-add previous button
    paginationControls.appendChild(prevBtn);

    // Calculate page range to display
    let startPage = Math.max(1, this.currentPage - 1);
    let endPage = Math.min(totalPages, this.currentPage + 1);

    // Always show first page
    if (startPage > 1) {
      const firstPageBtn = this.createPageButton(1);
      paginationControls.appendChild(firstPageBtn);
      
      if (startPage > 2) {
        const dots = document.createElement('span');
        dots.className = 'page-dots';
        dots.textContent = '...';
        paginationControls.appendChild(dots);
      }
    }

    // Show page numbers around current page
    for (let i = startPage; i <= endPage; i++) {
      const pageBtn = this.createPageButton(i);
      paginationControls.appendChild(pageBtn);
    }

    // Always show last page
    if (endPage < totalPages) {
      if (endPage < totalPages - 1) {
        const dots = document.createElement('span');
        dots.className = 'page-dots';
        dots.textContent = '...';
        paginationControls.appendChild(dots);
      }
      
      const lastPageBtn = this.createPageButton(totalPages);
      paginationControls.appendChild(lastPageBtn);
    }

    // Re-add next button
    paginationControls.appendChild(nextBtn);
  }

  createPageButton(pageNumber) {
    const btn = document.createElement('button');
    btn.className = `page-btn ${pageNumber === this.currentPage ? 'active' : ''}`;
    btn.textContent = pageNumber;
    btn.addEventListener('click', () => {
      this.currentPage = pageNumber;
      this.renderBookings();
      this.updatePagination();
    });
    return btn;
  }

  previousPage() {
    if (this.currentPage > 1) {
      this.currentPage--;
      this.renderBookings();
      this.updatePagination();
    }
  }

  nextPage() {
    const totalPages = Math.ceil(this.filteredBookings.length / this.itemsPerPage);
    if (this.currentPage < totalPages) {
      this.currentPage++;
      this.renderBookings();
      this.updatePagination();
    }
  }

  editBooking(id) {
    const booking = this.bookings.find(b => b.id === id);
    if (!booking) return;

    const modal = document.getElementById('statusModal');
    const body = document.getElementById('statusModalBody');
    
    body.innerHTML = `
      <div style="padding: 20px;">
        <h3>Edit Booking ${booking.orderNumber}</h3>
        <p>Passenger: ${booking.passenger.name}</p>
        <p>Current Status: <span class="status-badge ${booking.status}">${this.formatStatus(booking.status)}</span></p>
        <div style="margin-top: 20px;">
          <label>New Status:</label>
          <select id="newStatus" style="width: 100%; padding: 8px; margin-top: 8px; border: 1px solid #e0e0e0; border-radius: 6px;">
            <option value="pending">Pending</option>
            <option value="confirmed">Confirmed</option>
            <option value="checked-in">Checked In</option>
            <option value="canceled">Canceled</option>
          </select>
        </div>
        <div style="margin-top: 20px; display: flex; gap: 12px;">
          <button onclick="bookingManager.saveStatus(${id})" class="btn-primary">Save Changes</button>
          <button onclick="bookingManager.closeModal('statusModal')" class="btn-secondary">Cancel</button>
        </div>
      </div>
    `;
    
    modal.classList.add('show');
  }

  saveStatus(id) {
    const newStatus = document.getElementById('newStatus').value;
    const booking = this.bookings.find(b => b.id === id);
    
    if (booking) {
      booking.status = newStatus;
      this.updateStats();
      this.renderBookings();
      this.closeModal('statusModal');
      this.showSuccess('Booking status updated successfully');
    }
  }

  viewDetails(id) {
    const booking = this.bookings.find(b => b.id === id);
    if (!booking) return;

    const modal = document.getElementById('detailsModal');
    const body = document.getElementById('detailsModalBody');
    
    body.innerHTML = `
      <div style="padding: 20px;">
        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
          <div>
            <h4 style="margin-bottom: 12px; color: #666; font-size: 14px;">Booking Information</h4>
            <p><strong>Order Number:</strong> ${booking.orderNumber}</p>
            <p><strong>Status:</strong> <span class="status-badge ${booking.status}">${this.formatStatus(booking.status)}</span></p>
            <p><strong>Booking Date:</strong> ${booking.bookingDate.toLocaleDateString()}</p>
            <p><strong>Route:</strong> ${booking.route}</p>
          </div>
          <div>
            <h4 style="margin-bottom: 12px; color: #666; font-size: 14px;">Passenger Details</h4>
            <p><strong>Name:</strong> ${booking.passenger.name}</p>
            <p><strong>Email:</strong> ${booking.passenger.email}</p>
            <p><strong>Phone:</strong> ${booking.passenger.phone}</p>
          </div>
          <div>
            <h4 style="margin-bottom: 12px; color: #666; font-size: 14px;">Payment Information</h4>
            <p><strong>Amount:</strong> ${(booking.amount / 100).toFixed(2)}</p>
            <p><strong>Payment Status:</strong> <span class="payment-badge ${booking.paymentStatus}">${this.formatPaymentStatus(booking.paymentStatus)}</span></p>
          </div>
        </div>
        <div style="margin-top: 24px;">
          <button onclick="bookingManager.closeModal('detailsModal')" class="btn-secondary">Close</button>
        </div>
      </div>
    `;
    
    modal.classList.add('show');
  }

  deleteBooking(id) {
    const booking = this.bookings.find(b => b.id === id);
    if (!booking) return;

    if (confirm(`Are you sure you want to delete booking ${booking.orderNumber}?`)) {
      this.bookings = this.bookings.filter(b => b.id !== id);
      this.updateStats();
      this.applyFilters();
      this.showSuccess('Booking deleted successfully');
    }
  }

  showAddBookingModal() {
    const modal = document.getElementById('addBookingModal');
    if (!modal) return;

    // Reset form
    const form = document.getElementById('addBookingForm');
    if (form) form.reset();

    // Set default date to today
    const travelDate = document.getElementById('travelDate');
    if (travelDate) {
      const today = new Date().toISOString().split('T')[0];
      travelDate.setAttribute('min', today);
      travelDate.value = today;
    }

    // Set default values
    document.getElementById('numberOfSeats').value = 1;
    document.getElementById('pricePerSeat').value = 5000;
    document.getElementById('bookingStatus').value = 'confirmed';
    document.getElementById('paymentStatus').value = 'paid';

    this.updateTotalAmount();
    modal.classList.add('show');
  }

  updateTotalAmount() {
    const seats = parseInt(document.getElementById('numberOfSeats').value) || 0;
    const price = parseInt(document.getElementById('pricePerSeat').value) || 0;
    const total = seats * price;
    
    const totalDisplay = document.getElementById('totalAmountDisplay');
    if (totalDisplay) {
      totalDisplay.textContent = `${total.toLocaleString()} RWF`;
    }
  }

  handleAddBooking(e) {
    e.preventDefault();

    const formData = {
      passengerName: document.getElementById('passengerName').value,
      passengerEmail: document.getElementById('passengerEmail').value,
      passengerPhone: document.getElementById('passengerPhone').value,
      route: document.getElementById('route').value,
      travelDate: document.getElementById('travelDate').value,
      departureTime: document.getElementById('departureTime').value,
      numberOfSeats: parseInt(document.getElementById('numberOfSeats').value),
      seatNumbers: document.getElementById('seatNumbers').value,
      bookingStatus: document.getElementById('bookingStatus').value,
      pricePerSeat: parseInt(document.getElementById('pricePerSeat').value),
      paymentMethod: document.getElementById('paymentMethod').value,
      paymentStatus: document.getElementById('paymentStatus').value
    };

    // Generate seat numbers if not provided
    let seatNumbersArray = [];
    if (formData.seatNumbers.trim()) {
      seatNumbersArray = formData.seatNumbers.split(',').map(s => parseInt(s.trim())).filter(n => !isNaN(n));
    } else {
      // Auto-generate seat numbers
      for (let i = 0; i < formData.numberOfSeats; i++) {
        seatNumbersArray.push(Math.floor(Math.random() * 40) + 1);
      }
    }

    // Create new booking
    const newId = Math.max(...this.bookings.map(b => b.id), 0) + 1;
    const newBooking = {
      id: newId,
      orderNumber: `#ORD${String(1000 + newId).slice(1)}`,
      passenger: {
        name: formData.passengerName,
        email: formData.passengerEmail,
        phone: formData.passengerPhone,
        avatar: `https://i.pravatar.cc/40?img=${Math.floor(Math.random() * 70) + 1}`
      },
      bookingDate: new Date(),
      status: formData.bookingStatus,
      amount: formData.pricePerSeat * formData.numberOfSeats,
      paymentStatus: formData.paymentStatus,
      route: formData.route,
      travelDate: new Date(formData.travelDate),
      departureTime: formData.departureTime,
      seatNumbers: seatNumbersArray,
      paymentMethod: formData.paymentMethod
    };

    // Add to bookings array
    this.bookings.unshift(newBooking);

    // Update UI
    this.updateStats();
    this.applyFilters();
    this.closeModal('addBookingModal');
    this.showSuccess('Booking created successfully!');
  }

  showMoreActions(id) {
    this.showSuccess('More actions menu - feature coming soon');
  }

  closeModal(modalId) {
    const modal = document.getElementById(modalId);
    if (modal) {
      modal.classList.remove('show');
    }
  }

  exportBookings() {
    const dataToExport = this.filteredBookings.map(booking => ({
      'Order Number': booking.orderNumber,
      'Passenger Name': booking.passenger.name,
      'Email': booking.passenger.email,
      'Phone': booking.passenger.phone,
      'Route': booking.route,
      'Booking Date': booking.bookingDate.toLocaleDateString(),
      'Status': this.formatStatus(booking.status),
      'Amount': `${(booking.amount / 100).toFixed(2)}`,
      'Payment Status': this.formatPaymentStatus(booking.paymentStatus)
    }));

    this.downloadCSV(dataToExport, 'bookings_export.csv');
    this.showSuccess(`Exported ${dataToExport.length} booking(s)`);
  }

  downloadCSV(data, filename) {
    if (data.length === 0) return;

    const csvContent = [
      Object.keys(data[0]).join(','),
      ...data.map(row => Object.values(row).map(val => `"${val}"`).join(','))
    ].join('\n');

    const blob = new Blob([csvContent], { type: 'text/csv' });
    const url = URL.createObjectURL(blob);
    const link = document.createElement('a');
    link.href = url;
    link.download = filename;
    link.click();
    URL.revokeObjectURL(url);
  }

  showLoading() {
    document.getElementById('loadingOverlay').classList.add('show');
  }

  hideLoading() {
    document.getElementById('loadingOverlay').classList.remove('show');
  }

  showSuccess(message) {
    this.showNotification('success', message);
  }

  showError(message) {
    this.showNotification('error', message);
  }

  showNotification(type, message) {
    const notification = document.getElementById(`${type}Notification`);
    const messageEl = document.getElementById(`${type}Message`);
    
    if (notification && messageEl) {
      messageEl.textContent = message;
      notification.classList.add('show');
      
      setTimeout(() => {
        notification.classList.remove('show');
      }, 5000);
    }
  }
}

// Initialize
let bookingManager;

document.addEventListener('DOMContentLoaded', () => {
  bookingManager = new BookingManager();
  bookingManager.init();
});

// Global functions
function closeNotification(id) {
  const notification = document.getElementById(id);
  if (notification) {
    notification.classList.remove('show');
  }
}
  </script>
</body>
</html>